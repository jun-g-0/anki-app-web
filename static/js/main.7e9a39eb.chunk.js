(this["webpackJsonpanki-app-web"]=this["webpackJsonpanki-app-web"]||[]).push([[0],{113:function(e,n,t){},132:function(e,n,t){"use strict";t.r(n);var a=t(0),s=t.n(a),i=t(13),c=t.n(i),r=(t(113),t(73)),o=t(174),d=t(77),l=t(161),u=t(49),j=t(176),p=t(163),b=t(164),x=t(165),h=t(166),O=t(167),f=t(168),m=t(91),g=t.n(m),w=t(92),v=t.n(w),y=t(93),I=t.n(y),S=t(80),q=t.n(S),C=t(95),k=t.n(C),N=t(94),D=t.n(N),A=t(16),M=t(58),R=function(){return Object(M.b)()},F=M.c,P=t(40),Q=t.n(P),B=t(55),L=t(22),T=t(6);t(134),t(86);T.a.initializeApp({apiKey:"AIzaSyAPg7U3PkL0IOAtg4FVYH1yq3Ec3YjluJ0",authDomain:"anki-dev.firebaseapp.com",databaseURL:"https://anki-dev-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"anki-dev",storageBucket:"anki-dev.appspot.com",messagingSenderId:"555101731765",appId:"1:555101731765:web:2d382c2d9e9653df74b7fc",measurementId:"G-JV4NFCV4VP"});var U=T.a,W=T.a.firestore(),E=T.a.auth();var V=Object(L.b)("user/fetchUser",Object(B.a)(Q.a.mark((function e(){var n,t;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,n){E.onAuthStateChanged((function(t){t?e(t):n()}))}));case 2:return n=e.sent,t={uid:n.uid,email:n.email,displayName:n.displayName},e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})))),J=Object(L.b)("user/signOutThunk",Object(B.a)(Q.a.mark((function e(){return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.signOut();case 2:case"end":return e.stop()}}),e)})))),z=Object(L.c)({name:"user",initialState:{isSignedIn:"pending",uid:null,displayName:null,email:null},reducers:{},extraReducers:function(e){e.addCase(V.fulfilled,(function(e,n){e.isSignedIn="signedIn",e.uid=n.payload.uid,e.displayName=n.payload.displayName,e.email=n.payload.email})).addCase(V.rejected,(function(e){e.isSignedIn="NotSignedIn"})).addCase(V.pending,(function(e){e.isSignedIn="pending"})).addCase(J.fulfilled,(function(e){e.isSignedIn="NotSignedIn",e.uid=null,e.displayName=null,e.email=null}))}}),H=function(e){return e.user},_=z.reducer,G=t(3),Y=Object(l.a)((function(e){return{drawer:{width:240,flexShrink:0},drawerPaper:{width:240},drawerHeader:Object(d.a)(Object(d.a)({display:"flex",alignItems:"center",padding:e.spacing(0,1)},e.mixins.toolbar),{},{justifyContent:"space-between"})}}));function K(e){var n=Y(),t=Object(u.a)(),a=R(),s=F(H),i=Object(A.f)();function c(){i.push("/")}return Object(G.jsx)(G.Fragment,{children:Object(G.jsxs)(j.a,{className:n.drawer,variant:"persistent",anchor:"left",open:e.open,classes:{paper:n.drawerPaper},children:[Object(G.jsxs)("div",{className:n.drawerHeader,children:["\u8cc7\u683c\u53d6\u5f97\u88dc\u52a9\u30b7\u30b9\u30c6\u30e0",Object(G.jsx)(p.a,{onClick:e.handleDrawerClose,children:"ltr"===t.direction?Object(G.jsx)(g.a,{}):Object(G.jsx)(v.a,{})})]}),Object(G.jsx)(b.a,{}),Object(G.jsxs)(x.a,{children:[Object(G.jsxs)(h.a,{button:!0,onClick:function(){e.handleDrawerClose(),c()},children:[Object(G.jsx)(O.a,{children:Object(G.jsx)(I.a,{})}),Object(G.jsx)(f.a,{primary:"\u30db\u30fc\u30e0"})]},"home"),Object(G.jsxs)(h.a,{button:!0,onClick:function(){e.handleDrawerClose(),i.push("/training")},children:[Object(G.jsx)(O.a,{children:Object(G.jsx)(D.a,{})}),Object(G.jsx)(f.a,{primary:"\u6f14\u7fd2"})]},"training"),Object(G.jsxs)(h.a,{button:!0,onClick:function(){e.handleDrawerClose(),i.push("/queslist")},children:[Object(G.jsx)(O.a,{children:Object(G.jsx)(k.a,{})}),Object(G.jsx)(f.a,{primary:"\u8cea\u554f\u4e00\u89a7"})]},"queslist"),Object(G.jsxs)(h.a,{button:!0,onClick:function(){e.handleDrawerClose(),i.push("/settings")},children:[Object(G.jsx)(O.a,{children:Object(G.jsx)(q.a,{})}),Object(G.jsx)(f.a,{primary:"\u8a2d\u5b9a\u5909\u66f4"})]},"settings"),Object(G.jsxs)(h.a,{button:!0,onClick:function(){a(J()),e.handleDrawerClose(),c()},children:[Object(G.jsx)(O.a,{children:Object(G.jsx)(q.a,{})}),Object(G.jsx)(f.a,{primary:"\u30ed\u30b0\u30a2\u30a6\u30c8"})]},"logout"),"signedIn"===s.isSignedIn&&Object(G.jsx)(h.a,{children:Object(G.jsx)(f.a,{primary:"\u30e6\u30fc\u30b6: ".concat(s.displayName,"\u3055\u3093")})})]})]})})}var X=t(67),Z=t(169),$=t(170),ee=t(5),ne=t(96),te=t.n(ne),ae=Object(l.a)((function(e){return{appBar:{transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{width:"calc(100% - ".concat(240,"px)"),marginLeft:240,transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:e.spacing(2)},hide:{display:"none"}}}));function se(e){var n=ae();return Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)(Z.a,{position:"fixed",className:Object(ee.a)(n.appBar,Object(X.a)({},n.appBarShift,e.open)),children:Object(G.jsx)($.a,{children:Object(G.jsx)(p.a,{color:"inherit","aria-label":"open drawer",onClick:e.handleDrawerOpen,edge:"start",className:Object(ee.a)(n.menuButton,e.open&&n.hide),children:Object(G.jsx)(te.a,{})})})}),Object(G.jsx)($.a,{})]})}var ie=t(172),ce=t(171),re=Object(L.b)("questions/fetchQuestions",Object(B.a)(Q.a.mark((function e(){var n,t;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.collection("demo-qa").get();case 2:return n=e.sent,t=[],n.forEach((function(e){t.push(e.data())})),t.sort((function(e,n){return+e.questionId-+n.questionId})),e.abrupt("return",t);case 7:case"end":return e.stop()}}),e)})))),oe=Object(L.c)({name:"questions",initialState:{isLoaded:"pending",questions:[],updateDate:0},reducers:{},extraReducers:function(e){e.addCase(re.pending,(function(e){e.isLoaded="pending"})).addCase(re.fulfilled,(function(e,n){e.isLoaded="loaded",e.questions=n.payload,e.updateDate=Date.now()}))}}),de=function(e){return e.questions.questions},le=oe.reducer;function ue(){var e=F(de);return Object(G.jsx)(G.Fragment,{children:Object(G.jsx)(ce.a,{maxWidth:"md",children:Object(G.jsx)("ul",{children:e.map((function(e){return Object(G.jsxs)("ul",{children:[Object(G.jsx)("p",{style:{whiteSpace:"pre-line"},children:e.questionText.replaceAll("\\n","\n")}),Object(G.jsx)("p",{style:{whiteSpace:"pre-line"},children:e.desc.replaceAll("\\n","\n")||"no desc"}),Object(G.jsx)(ie.a,{variant:"contained",color:"secondary",children:"\u8a73\u7d30"})]},e.questionId)}))})})})}var je=t(60),pe=t(97),be=t.n(pe),xe=Object(l.a)((function(){return{home:{display:"flex",alignItems:"center",flexDirection:"column",padding:"20px"}}})),he={signInFlow:"popup",signInSuccessUrl:"/",signInOptions:[U.auth.GoogleAuthProvider.PROVIDER_ID,U.auth.TwitterAuthProvider.PROVIDER_ID,U.auth.FacebookAuthProvider.PROVIDER_ID]};function Oe(){var e=xe(),n=Object(A.f)(),t=F(H);return Object(G.jsx)(G.Fragment,{children:Object(G.jsxs)(ce.a,{maxWidth:"xl",className:e.home,children:[Object(G.jsx)(je.a,{component:"h2",variant:"h4",color:"textPrimary",gutterBottom:!0,children:"\u8cc7\u683c\u53d6\u5f97\u88dc\u52a9\u30b7\u30b9\u30c6\u30e0"}),Object(G.jsx)(ie.a,{variant:"contained",color:"primary",onClick:function(){n.push("/training")},children:"\u6f14\u7fd2\u958b\u59cb"}),Object(G.jsx)("div",{style:{whiteSpace:"pre-line"},children:"signedIn"===t.isSignedIn?"\n".concat(t.displayName,"\u3055\u3093\u3001\u3053\u3093\u306b\u3061\u306f\uff01"):"NotSignedIn"===t.isSignedIn?Object(G.jsx)(be.a,{uiConfig:he,firebaseAuth:E}):null})]})})}var fe=t(175),me=t(177),ge=t(178),we=t(173),ve=t(179),ye=Object(L.c)({name:"answerLog",initialState:{},reducers:{logUpdate:function(e,n){for(var t=0,a=Object.keys(n.payload.questions);t<a.length;t++){var s=a[t],i=n.payload.questions[s],c=n.payload.answers[i.questionId],r=!1;"radio"===i.type&&Number(i.answer)===Number(c)&&(r=!0),e[i.questionId]||(e[i.questionId]=[]),e[i.questionId].unshift(r),e[i.questionId].length>5&&e[i.questionId].pop()}}}}),Ie=ye.actions.logUpdate,Se=function(e){return e.answerLog},qe=ye.reducer,Ce=Object(L.c)({name:"session",initialState:{selectedQuestions:[],selectedAnswers:{},currentQuestionNum:0,lastSession:{selectedQuestions:[],selectedAnswers:{}}},reducers:{sessionInit:function(e){e.lastSession.selectedQuestions=e.selectedQuestions,e.lastSession.selectedAnswers=e.selectedAnswers,e.selectedQuestions=[],e.selectedAnswers={},e.currentQuestionNum=0},selectedQuestionsUpdate:function(e,n){e.selectedQuestions=n.payload.questions},answerSelected:function(e,n){e.selectedAnswers[n.payload.key]=n.payload.val},questionMoved:function(e,n){e.currentQuestionNum=n.payload}}}),ke=Ce.actions,Ne=ke.sessionInit,De=(ke.selectedQuestionsUpdate,ke.answerSelected),Ae=ke.questionMoved,Me=function(e){return e.session},Re=function(e){return e.session.currentQuestionNum},Fe=function(e){return e.session.lastSession},Pe=Ce.reducer,Qe=Object(l.a)((function(e){return{home:{display:"flex",alignItems:"center",flexDirection:"column",padding:"20px"},question:{display:"flex",alignItems:"left",flexDirection:"column"},questionIdAndResult:{display:"flex",alignItems:"left",flexDirection:"row",padding:"20px"},questionDetail:{display:"flex",alignItems:"left",flexDirection:"column",padding:"0px 20px 20px 20px"}}}));function Be(){var e=Qe(),n=Object(A.f)(),t=F(de),a=F(Fe),s=F(Se);return Object(G.jsx)(G.Fragment,{children:Object(G.jsxs)(ce.a,{maxWidth:"md",className:e.home,children:[Object(G.jsx)(ce.a,{children:t.map((function(n){return Object(G.jsxs)(ce.a,{className:e.question,children:[Object(G.jsxs)(ce.a,{className:e.questionIdAndResult,children:[Object(G.jsx)(je.a,{children:"\u554f\u984cID: ".concat(n.questionId)}),Object(G.jsx)(je.a,{style:{padding:"0px 0px 0px 20px"},children:Number(a.selectedAnswers[n.questionId])===Number(n.answer)?"\u6b63\u89e3 ":"\u4e0d\u6b63\u89e3"}),Object(G.jsx)(je.a,{style:{padding:"0px 0px 0px 20px"},children:"\u56de\u7b54\u5c65\u6b74: ".concat(s[n.questionId].toString().replaceAll("true","\u25ef").replaceAll("false","\xd7").replaceAll(",",""))})]}),Object(G.jsxs)(ce.a,{className:e.questionDetail,children:[Object(G.jsx)(ce.a,{style:{whiteSpace:"pre-line",padding:"0px 0px 10px 20px"},children:n.questionText.replaceAll("\\n","\n")}),Object(G.jsx)(ce.a,{style:{padding:"0px 0px 20px 40px"},children:Object(G.jsx)(ge.a,{name:"choicesRadio",value:String(a.selectedAnswers[n.questionId]),children:n.choices.map((function(e){return Object(G.jsx)(we.a,{value:String(e.choiceId),control:Object(G.jsx)(me.a,{}),label:"".concat(e.choiceId===n.answer?"(\u6b63\u89e3) ":"").concat(e.choiceText),disabled:!0},e.choiceId)}))})}),Object(G.jsx)(ce.a,{style:{whiteSpace:"pre-line",padding:"0px 0px 0px 20px"},children:n.desc.replaceAll("\\n","\n")||"no desc"})]})]},n.questionId)}))}),Object(G.jsx)(ie.a,{variant:"contained",color:"secondary",onClick:function(){n.push("/")},children:"\u95b2\u89a7\u7d42\u4e86"})]})})}var Le=Object(L.c)({name:"settings",initialState:{tapMode:"tapMode",theme:"white"},reducers:{setTapMode:function(e){e.tapMode="tapMode"},setButtonMode:function(e){e.tapMode="buttonMode"}}}),Te=Le.actions,Ue=Te.setTapMode,We=Te.setButtonMode,Ee=function(e){return e.settings},Ve=function(e){return e.settings.tapMode},Je=Le.reducer,ze=Object(l.a)((function(){return{home:{display:"flex",alignItems:"center",flexDirection:"column",padding:"20px"},nav:{display:"flex",flexDirection:"row",justifyContent:"space-around",padding:"20px"},afterAnswer:{color:"green"}}}));function He(){var e=ze(),n=Object(A.g)(),t=n.path,s=n.url,i=Object(A.f)(),c=R(),o=F(de),d=F(Me),l=F(Re),u=F(Ee),j=Object(a.useMemo)((function(){return o[l]}),[o,l]),p=Object(a.useState)(!1),b=Object(r.a)(p,2),x=b[0],h=b[1],O=function(){h(!0)},f=function(e){h(!1),c(Ae(e))};return Object(G.jsx)(G.Fragment,{children:Object(G.jsxs)(A.c,{children:[Object(G.jsx)(A.a,{exact:!0,path:t,children:Object(G.jsxs)(ce.a,{children:[Object(G.jsxs)(ce.a,{maxWidth:"md",className:e.home,children:[Object(G.jsxs)(fe.a,{children:["ID: ",j.questionId]}),Object(G.jsx)("p",{style:{whiteSpace:"pre-line"},children:j.questionText.replaceAll("\\n","\n")})]}),Object(G.jsx)(ce.a,{maxWidth:"md",className:e.home,children:Object(G.jsx)(ve.a,{component:"fieldset",children:Object(G.jsx)(ge.a,{"aria-label":"choicesRadio",name:"choicesRadio",value:String(d.selectedAnswers[j.questionId]),onChange:function(e){"tapMode"===u.tapMode&&O(),c(De({key:j.questionId,val:e.target.value}))},children:j.choices.map((function(n){return Object(G.jsx)(we.a,{value:String(n.choiceId),control:Object(G.jsx)(me.a,{}),label:n.choiceText,className:x?e.afterAnswer:void 0},n.choiceId)}))})})}),Object(G.jsxs)(ce.a,{maxWidth:"md",className:e.home,children:["buttonMode"===u.tapMode&&Object(G.jsx)(ie.a,{variant:"contained",color:"primary",onClick:O,children:"\u6b63\u7b54"}),x&&String(d.selectedAnswers[j.questionId])===String(j.answer)?Object(G.jsx)("p",{children:"\u6b63\u89e3\u3067\u3059!\ud83c\udf89"}):x?Object(G.jsx)("p",{children:"\u4e0d\u6b63\u89e3\u3067\u3059\u3002"}):null,x&&Object(G.jsxs)("div",{style:{whiteSpace:"pre-line"},children:[Object(G.jsx)("p",{children:"\u89e3\u8aac"}),Object(G.jsx)("p",{children:j.desc.replaceAll("\\n","\n")})]})]}),Object(G.jsxs)(ce.a,{maxWidth:"md",className:e.nav,children:[0!==l&&Object(G.jsx)(ie.a,{variant:"contained",color:"primary",onClick:function(){f(l-1)},children:"\u524d\u306e\u554f\u984c"}),l!==o.length-1&&Object(G.jsx)(ie.a,{variant:"contained",color:"primary",onClick:function(){f(l+1)},children:"\u6b21\u306e\u554f\u984c"}),l===o.length-1&&Object(G.jsx)(ie.a,{variant:"contained",color:"secondary",onClick:function(){f(0),c(Ie({questions:o,answers:d.selectedAnswers})),c(Ne()),i.push("".concat(s,"/result"))},children:"\u56de\u7b54\u7d42\u4e86"})]})]})}),Object(G.jsx)(A.a,{path:"".concat(s,"/result"),children:Object(G.jsx)(Be,{})})]})})}var _e=Object(l.a)((function(e){return{home:{display:"flex",alignItems:"center",flexDirection:"column",padding:"20px"},settings:{display:"flex",alignItems:"left",justifyContent:"space-around",flexDirection:"column",padding:"20px"},settingsChoices:{display:"flex",flexDirection:"column",padding:"0px 20px 20px 20px"},nav:{display:"flex",flexDirection:"row",justifyContent:"space-around",padding:"20px"}}}));function Ge(){var e=_e(),n=F(Ve),t=R();return Object(G.jsx)(G.Fragment,{children:Object(G.jsxs)(ce.a,{maxWidth:"md",className:e.home,children:[Object(G.jsx)(je.a,{variant:"h4",children:"\u8a2d\u5b9a"}),Object(G.jsx)(fe.a,{className:e.settings,children:Object(G.jsxs)(fe.a,{children:[Object(G.jsx)(je.a,{variant:"h6",children:"\u30bf\u30c3\u30d7\u30e2\u30fc\u30c9"}),Object(G.jsx)(je.a,{variant:"subtitle2"}),Object(G.jsxs)(ge.a,{"aria-label":"tapModeRadio",name:"tapModeRadio",onChange:function(e){switch(e.target.value){case"tapMode":t(Ue());break;case"buttonMode":t(We())}},className:e.settingsChoices,value:n,children:[Object(G.jsx)(we.a,{value:"tapMode",control:Object(G.jsx)(me.a,{}),label:"\u30bf\u30c3\u30d7\u30e2\u30fc\u30c9"},"tapMode"),Object(G.jsxs)(je.a,{variant:"subtitle2",children:[Object(G.jsx)("b",{children:"\u56de\u7b54\u306e\u9078\u629e\u80a2"}),"\u304c\u9078\u629e\u3055\u308c\u305f\u6642\u70b9\u3067\u6b63\u89e3\u3092\u8868\u793a"]}),Object(G.jsx)(we.a,{value:"buttonMode",control:Object(G.jsx)(me.a,{}),label:"\u30dc\u30bf\u30f3\u30e2\u30fc\u30c9"},"buttonMode"),Object(G.jsxs)(je.a,{variant:"subtitle2",children:[Object(G.jsx)("b",{children:"\u6b63\u7b54\u30dc\u30bf\u30f3"}),"\u304c\u9078\u629e\u3055\u308c\u305f\u6642\u70b9\u3067\u6b63\u89e3\u3092\u8868\u793a"]})]})]})})]})})}var Ye=t(46);var Ke=function(){var e=s.a.useState(!1),n=Object(r.a)(e,2),t=n[0],i=n[1],c=R();return Object(a.useEffect)((function(){c(re()),c(V())}),[c]),Object(G.jsx)(G.Fragment,{children:Object(G.jsxs)(Ye.a,{children:[Object(G.jsx)(o.a,{}),Object(G.jsx)(se,{open:t,handleDrawerOpen:function(){i(!0)}}),Object(G.jsx)(K,{handleDrawerClose:function(){i(!1)},open:t}),Object(G.jsxs)(A.c,{children:[Object(G.jsx)(A.a,{exact:!0,path:"/",children:Object(G.jsx)(Oe,{})}),Object(G.jsx)(A.a,{path:"/training",children:Object(G.jsx)(He,{})}),Object(G.jsx)(A.a,{path:"/queslist",children:Object(G.jsx)(ue,{})}),Object(G.jsx)(A.a,{path:"/settings",children:Object(G.jsx)(Ge,{})})]})]})})},Xe=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,181)).then((function(n){var t=n.getCLS,a=n.getFID,s=n.getFCP,i=n.getLCP,c=n.getTTFB;t(e),a(e),s(e),i(e),c(e)}))},Ze=t(28),$e=t(59),en=t.n($e),nn={key:"settings",version:1,storage:en.a},tn={key:"questions",version:1,storage:en.a},an={key:"answer",version:1,storage:en.a},sn={key:"session",version:1,storage:en.a},cn=Object(Ze.g)(nn,Je),rn=Object(Ze.g)(tn,le),on=Object(Ze.g)(an,qe),dn=Object(Ze.g)(sn,Pe),ln=Object(L.a)({reducer:{settings:cn,user:_,questions:rn,answerLog:on,session:dn},middleware:function(e){return e({serializableCheck:{ignoredActions:[Ze.a,Ze.f,Ze.b,Ze.c,Ze.d,Ze.e]}})}}),un=Object(Ze.h)(ln),jn=t(99);c.a.render(Object(G.jsx)(s.a.StrictMode,{children:Object(G.jsx)(M.a,{store:ln,children:Object(G.jsx)(jn.a,{loading:null,persistor:un,children:Object(G.jsx)(Ke,{})})})}),document.getElementById("root")),Xe()}},[[132,1,2]]]);
//# sourceMappingURL=main.7e9a39eb.chunk.js.map